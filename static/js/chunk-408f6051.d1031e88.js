(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-408f6051"],{"35ad":function(t,e,a){"use strict";a("99af");var r=a("b775");e["a"]={getContractListPage:function(t,e,a){return Object(r["a"])({url:"/staff/contract/listPage/".concat(t,"/").concat(e),method:"post",data:a})},deleteContractById:function(t){return Object(r["a"])({url:"/staff/contract/".concat(t),method:"delete"})},addContract:function(t){return Object(r["a"])({url:"/staff/contract",method:"post",data:t})},getContractById:function(t){return Object(r["a"])({url:"/staff/contract/".concat(t),method:"get"})},updateContract:function(t){return Object(r["a"])({url:"/staff/contract",method:"put",data:t})},getContractList:function(){return Object(r["a"])({url:"/staff/contract/list",method:"get"})},getClerkThrough:function(){return Object(r["a"])({url:"/staff/contract/getContract",method:"post"})}}},"7e9a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"contract",attrs:{"label-width":"120px",rules:t.rule,model:t.contract}},[a("el-form-item",{attrs:{label:"合同编号"}},[a("el-input",{attrs:{span:6,disabled:!0},model:{value:t.contract.id,callback:function(e){t.$set(t.contract,"id",e)},expression:"contract.id"}})],1),a("el-form-item",{attrs:{label:"合同名称",prop:"name"}},[a("el-input",{model:{value:t.contract.name,callback:function(e){t.$set(t.contract,"name",e)},expression:"contract.name"}})],1),a("el-form-item",{attrs:{label:"签约日期",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.contract.time,callback:function(e){t.$set(t.contract,"time",e)},expression:"contract.time"}})],1),a("el-form-item",{attrs:{label:"到期时间日期",prop:"timeout"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.contract.timeout,callback:function(e){t.$set(t.contract,"timeout",e)},expression:"contract.timeout"}})],1),a("el-form-item",{attrs:{label:"选择职工",prop:"clerkId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.contract.clerkId,callback:function(e){t.$set(t.contract,"clerkId",e)},expression:"contract.clerkId"}},t._l(t.clerkList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"合同照片",prop:"url"}},[""!=t.contract.url?a("pan-thumb",{attrs:{image:t.contract.url}}):t._e(),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"primary"},on:{click:function(e){t.imagecropperShow=!0}}},[t._v(t._s(""==t.contract.url?" 上传图片":" 更换图片"))]),a("image-cropper",{directives:[{name:"show",rawName:"v-show",value:t.imagecropperShow,expression:"imagecropperShow"}],key:t.imagecropperKey,attrs:{width:300,height:300,url:"http://localhost:9181/oss/fileoss/uploadOssFile",field:"file"},on:{close:t.close,"crop-upload-success":t.cropSuccess}})],1),a("el-form-item",[a("el-button",{staticStyle:{"font-size":"16px"},attrs:{disabled:t.saveBtnDisabled,type:"primary"},on:{click:t.saveOrUpdate}},[t._v(" 保存")])],1)],1)],1)},c=[],n=a("ade3"),o=a("35ad"),s=a("896b"),i=a("3cbc"),l=a("9ffe"),u={components:{ImageCropper:s["a"],PanThumb:i["a"]},data:function(){var t;return t={baseApi:"https://api-administration.choringedu.cn",contract:{url:""},saveBtnDisabled:!1},Object(n["a"])(t,"saveBtnDisabled",!1),Object(n["a"])(t,"imagecropperShow",!1),Object(n["a"])(t,"imagecropperKey",0),Object(n["a"])(t,"clerkList",null),Object(n["a"])(t,"rule",{name:[{required:!0,message:"请填写合同名称",trigger:"change"}],time:[{required:!0,message:"请选择签约时间",trigger:"change"}],timeout:[{required:!0,message:"请选择到期时间",trigger:"change"}],clerkId:[{required:!0,message:"请选择职工",trigger:"change"}],url:[{required:!0,message:"请选择合同照片",trigger:"change"}]}),t},created:function(){this.init(),this.initClerk()},watch:{$route:function(t,e){this.init()}},methods:{close:function(){this.imagecropperShow=!1,this.imagecropperKey=this.imagecropperKey+1},cropSuccess:function(t){this.imagecropperShow=!1,console.log(t),this.contract.url=t.url,this.imagecropperKey=this.imagecropperKey+1},init:function(){if(this.$route.params&&this.$route.params.id){var t=this.$route.params.id;this.getContractById(t)}else this.contract={}},initClerk:function(){var t=this;l["a"].getClerkList().then((function(e){t.clerkList=e.data.clerkList}))},updateContract:function(){var t=this;o["a"].updateContract(this.contract).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.$router.push({path:"/contract/listContract"})}))},getContractById:function(t){var e=this;o["a"].getContractById(t).then((function(t){e.contract=t.data.contract})).catch((function(t){}))},saveOrUpdate:function(){var t=this;this.$refs["contract"].validate((function(e){e&&(t.$route.params&&t.$route.params.id?t.updateContract():t.saveContract())}))},saveContract:function(){var t=this;o["a"].addContract(this.contract).then((function(e){t.$message({type:"success",message:"添加成功"}),t.$router.push({path:"/contract/listContract"})})).catch((function(t){}))}}},d=u,p=a("2877"),f=Object(p["a"])(d,r,c,!1,null,null,null);e["default"]=f.exports},"9ffe":function(t,e,a){"use strict";a("99af");var r=a("b775");e["a"]={getClerkListPage:function(t,e,a){return Object(r["a"])({url:"/staff/clerk/listPage/".concat(t,"/").concat(e),method:"post",data:a})},getClerkListPageLizhi:function(t,e,a){return Object(r["a"])({url:"/staff/clerk/listPageLiZhi/".concat(t,"/").concat(e),method:"post",data:a})},deleteClerkById:function(t){return Object(r["a"])({url:"/staff/clerk/".concat(t),method:"delete"})},addClerk:function(t){return Object(r["a"])({url:"/staff/clerk",method:"post",data:t})},getClerkById:function(t){return Object(r["a"])({url:"/staff/clerk/".concat(t),method:"get"})},updateClerk:function(t){return Object(r["a"])({url:"/staff/clerk",method:"put",data:t})},getClerkList:function(){return Object(r["a"])({url:"/staff/clerk/list",method:"get"})},getClerkAndUserRole:function(){return Object(r["a"])({url:"/staff/clerk/getClerkAndUserRole",method:"post"})},updateUser:function(t){return Object(r["a"])({url:"/staff/user",method:"put",data:t})},getPassword:function(t){return Object(r["a"])({url:"/staff/user/getPassword/"+t,method:"post"})},putPassword:function(t){return Object(r["a"])({url:"/staff/user/putPassword/"+t,method:"put"})},getClerkByDepartmentId:function(t){return Object(r["a"])({url:"/staff/clerk/getClerkByDepartmentId/"+t,method:"get"})},resetPassword:function(t){return Object(r["a"])({url:"/staff/user/resetPassword/"+t,method:"put"})}}}}]);