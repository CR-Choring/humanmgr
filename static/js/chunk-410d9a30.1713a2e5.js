(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-410d9a30"],{"2fd4":function(t,e,a){"use strict";a("99af");var n=a("b775");e["a"]={getAttendanceListPage:function(t,e,a){return Object(n["a"])({url:"/staff/attendance/listPage/".concat(t,"/").concat(e),method:"post",data:a})},getAttendance:function(t,e,a){return Object(n["a"])({url:"/staff/attendance/getAttendance/".concat(t,"/").concat(e),method:"post",data:a})},deleteAttendanceById:function(t){return Object(n["a"])({url:"/staff/attendance/".concat(t),method:"delete"})},addAttendance:function(t){return Object(n["a"])({url:"/staff/attendance",method:"post",data:t})},getAttendanceById:function(t){return Object(n["a"])({url:"/staff/attendance/".concat(t),method:"get"})},updateAttendance:function(t){return Object(n["a"])({url:"/staff/attendance",method:"put",data:t})},getAttendanceList:function(){return Object(n["a"])({url:"/staff/attendance/list",method:"get"})},updateAttendanceOk:function(t){return Object(n["a"])({url:"/staff/attendance/updateAttendanceOk/".concat(t),method:"put"})},updateAttendanceNo:function(t){return Object(n["a"])({url:"/staff/attendance/updateAttendanceNo/".concat(t),method:"put"})}}},c5a4:function(t,e,a){"use strict";a.r(e);var n,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"员工名称"},model:{value:t.attendanceQueryVo.clerkName,callback:function(e){t.$set(t.attendanceQueryVo,"clerkName",e)},expression:"attendanceQueryVo.clerkName"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"部门名称"},model:{value:t.attendanceQueryVo.departmentName,callback:function(e){t.$set(t.attendanceQueryVo,"departmentName",e)},expression:"attendanceQueryVo.departmentName"}})],1),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择考勤类型"},model:{value:t.attendanceQueryVo.status,callback:function(e){t.$set(t.attendanceQueryVo,"status",e)},expression:"attendanceQueryVo.status"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"primary"},on:{click:function(e){return t.getAttendanceListPage()}}},[t._v(" 查询")]),a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"default"},on:{click:function(e){return t.resetData()}}},[t._v(" 清空")]),a("el-button",{staticStyle:{margin:"0 0 20px 20px","font-size":"16px"},attrs:{loading:t.downloadLoading,type:"primary"},on:{click:t.handleDownload}},[t._v(" 下载Excel ")])],1),a("el-table",{attrs:{data:t.list,"element-loading-text":"数据加载中",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.page-1)*t.limit+e.$index+1))]}}])}),a("el-table-column",{attrs:{prop:"id",sortable:"",label:"编号",width:"200"}}),a("el-table-column",{attrs:{prop:"time",sortable:"",label:"日期",width:"200"}}),a("el-table-column",{attrs:{prop:"status",label:"类型"}}),a("el-table-column",{attrs:{prop:"clerkId",sortable:"",label:"员工姓名"}}),a("el-table-column",{attrs:{prop:"departmentId",sortable:"",label:"员工部门"}}),1==t.isAdmin?a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"danger"},on:{click:function(a){return t.deleteAttendanceById(e.row.id)}}},[t._v("删除")])]}}],null,!1,1464793833)}):t._e()],1),a("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.page,"page-size":t.limit,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.getAttendanceListPage}})],1)},c=[],o=a("ade3"),i=a("5530"),r=(a("caad"),a("2532"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("2fd4")),d=a("2f62"),s={data:function(){return{downloadLoading:!1,options:[{value:"1",label:"事假"},{value:"2",label:"迟到"},{value:"3",label:"早退"},{value:"4",label:"病假"},{value:"5",label:"旷工"},{value:"6",label:"休补"}],list:null,page:1,limit:6,total:0,attendanceQueryVo:{audit:"1"},isAdmin:!1}},computed:Object(i["a"])({},Object(d["b"])(["roles"])),created:function(){this.roles.includes("管理员")&&(this.isAdmin=!0),this.getAttendanceListPage()},methods:(n={handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-f2c374ea"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(e){var a=["编号","员工姓名","部门","时间","类型"],n=["id","clerkId","departmentId","time","status"],l=t.list,c=t.formatJson(n,l);e.export_json_to_excel({header:a,data:c,filename:"考勤信息",autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?parseTime(e[t]):e[t]}))}))},resetData:function(){this.attendanceQueryVo={},this.getAttendanceListPage()},getAttendanceListPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=e,r["a"].getAttendanceListPage(this.page,this.limit,this.attendanceQueryVo).then((function(e){t.list=e.data.attendanceList,t.total=e.data.total})).catch((function(t){console.log(t)}))}},Object(o["a"])(n,"resetData",(function(){this.getAttendanceListPage()})),Object(o["a"])(n,"deleteAttendanceById",(function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r["a"].deleteAttendanceById(t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getAttendanceListPage()})).catch((function(t){e.$message({type:"warning",message:"删除失败!"})}))}))})),n)},u=s,f=a("2877"),p=Object(f["a"])(u,l,c,!1,null,null,null);e["default"]=p.exports}}]);